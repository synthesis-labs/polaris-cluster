---
all:
  children:
    # LOCAL
    local:
      hosts:
        local0:
          ansible_connection: local
    # CLUSTER NODES
    allnodes:
      children:
        # MASTER NODES
        masters:
          children:
            # MASTER 1
            # TODO: Generify to allow for X amount of masters
            mainMaster:
              hosts:
                master0:
                  ansible_host: 172.26.22.120
                  name: 172.26.22.120
                  initial_advertise_peer_url: https://172.26.22.120:2380
                  listen_peer_url: https://172.26.22.120:2380
                  listen_client_urls:
                    - https://172.26.22.120:2379
                    - http://127.0.0.1:2379
                  advertise_client_url: https://172.26.22.120:2379
            # SECONDARY MASTERS
            secondaryMasters:
              hosts:
                master1:
                  ansible_host: 172.26.22.121
                  name: 172.26.22.121
                  initial_advertise_peer_url: https://172.26.22.121:2380
                  listen_peer_url: https://172.26.22.121:2380
                  listen_client_urls:
                    - https://172.26.22.121:2379
                    - http://127.0.0.1:2379
                  advertise_client_url: https://172.26.22.121:2379
                master2:
                  ansible_host: 172.26.22.122
                  name: 172.26.22.122
                  initial_advertise_peer_url: https://172.26.22.122:2380
                  listen_peer_url: https://172.26.22.122:2380
                  listen_client_urls:
                    - https://172.26.22.122:2379
                    - http://127.0.0.1:2379
                  advertise_client_url: https://172.26.22.122:2379
          # VARIABLES FOR MASTER NODES
          vars:
            pod_subnet: "100.96.0.0/11"
            apiserver_count: "3"
        # WORKER NODES
        workers:
          hosts:
            worker0:
              ansible_host: 172.26.22.100
              name: worker0
      # VARIABLES FOR ALL NODES
      vars:
        master0_url: 172.26.22.120
        master1_url: 172.26.22.121
        master2_url: 172.26.22.122
        #Ingress Port Forwarding (ingress_http_node_port -> ingress_http_port)
        ingress0_url: 172.26.22.100
        ingress_http_port: 30080
        ingress_https_port: 30443
        ingress_http_node_port: 80
        ingress_https_node_port: 443
        master_api_port: 6443
        ansible_connection: ssh
  # VARIABLES FOR ALL HOSTS
  vars:
    hostnames:
      - 172.26.22.120
      - 172.26.22.121
      - 172.26.22.122
      - 172.26.22.123
      - 172.26.22.124
      - 172.26.22.125
      - 172.26.22.126
      - 172.26.22.127
      - 172.26.22.128
      - 10.96.0.1
      - 127.0.0.1
      - "{{cluster_name}}"
      - "{{cluster_name}}.default"
      - "{{cluster_name}}.default.svc"
      - "{{cluster_name}}.default.svc.cluster"
      - "{{cluster_name}}.default.svc.cluster.local"
    kubernetes_version: 1.12.3
    control_plane_endpoint: "127.0.0.1:32443"
    cluster_name: kubernetes
